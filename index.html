<html>
<head>
<title>CERN Trip 2018 Pictures</title>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>
<script src="https://apis.google.com/js/api.js"></script>

<style>

body
{
	padding: 15px;
}

.VerticalAlgin
{
	position:relative; 
	top: 50%; 
	transform: translateY(-50%);
}

</style>

<script>
	// Picture Class
	function Picture(imageInfo)
	{
		data = imageInfo.split(',');
		this.imgName = data[0];
		this.imgId = data[1];
		this.imgDate = data[2];
		this.imgTime = data[3];
		this.tags = data[4].split('|');
		this.lists = data[5].split('|');
		this.hasEdited = (data[6] == "true")
	}
	
	var imgID = 0;
	var images = [];
	
	// Loads image
	function LoadImage()
	{
		var image = images[imgID];
		document.getElementById("pictureName").innerHTML = image.imgName;
		document.getElementById("picture").src = "https://firebasestorage.googleapis.com/v0/b/cern-trip-website.appspot.com/o/jpeg%2F" + image.imgName + ".jpg?alt=media";
		document.getElementById("downloadCR2").href = "https://drive.google.com/uc?export=download&id=" + image.imgId;
		document.getElementById("downloadJpg").href = "https://drive.google.com/uc?export=download&id=" + image.imgId;
		document.getElementById("downloadEditedJpg").href = "https://drive.google.com/uc?export=download&id=" + image.imgId;
	}
	
	function prevImage()
	{
		imgID -= 1;
		if (imgID < 0)
		{
			imgID = images.length - 1
		}
		
		LoadImage();
	}
	
	function nextImage()
	{
		imgID += 1;
		if (imgID == images.length)
		{
			imgID = 0
		}
		
		LoadImage();
	}
	
	
	// On window load
	var rawFile = new XMLHttpRequest();
	rawFile.open("GET", "info2.txt", false);
	rawFile.send();
	var info = rawFile.responseText.split('\n');
	
	for (var line in info)
	{
		images.push(new Picture(info[line]));
	}
	
	
	
	window.onload = LoadImage;
</script>

</head>


<body>

<span id="largePicture" style="position: fixed; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); visibility: hidden; z-index: 100; cursor: pointer;" onclick="this.style.visibility = 'hidden'">
	
	<div id="PageTurnLeft" style="left: -1px; padding: 0; margin: 0; position: fixed; width: 10%; height: 100%;" class="btn btn-default">
		<button style="width: 100%; height: 100%; top: 0%; border: 0px;" onclick="prevImage()" class="btn btn-default" ></button>
		<img src="ArrowLeft.png" style="position:absolute; width: 20px; pointer-events: none; left: 25%;" class="VerticalAlgin"></image>
	</div>
	
	<span id="currentPicture" style="position: fixed; margin: 50px; padding: 15px; text-align: center; vertical-align: center; align: center; width: 60%; height: 80%; top: 0;">
		<img id="picture" src="" style="width: 100%;"></img>
	</span>
	
	<div id="PageTurnRight" style="right: -1px; padding: 0; margin: 0; position: fixed; width: 10%; height: 100%;" class="btn btn-default">
		<button style="width: 100%; height: 100%; top: 0%; border: 0px;" onclick="nextImage()" class="btn btn-default" ></button>
		<img src="ArrowRight.png" style="position:absolute; width: 20px; pointer-events: none; left: 25%;" class="VerticalAlgin"></image>
	</div>
	
	<span style="position: fixed; bottom: 0; height: 10%; text-align: center;">
		<br/>
		<div id="pictureName" style="text-align: center; font-size: 24px;"></div>
		<a id="downloadCR2" href="" download class="btn btn-primary disabled">Download CR2</a>
		<a id="downloadJpg" href="" download class="btn btn-danger">Download Jpeg</a>
		<a id="downloadEditedJpg" href="" download class="btn btn-success disabled">Download edited</a>
	</span>
	
</span>

<span id="pictures" style="width: 100%; height: 100%;">
	
	
</span>

</body>
</html>