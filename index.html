<html>
<head>
<title>CERN Trip 2018 Pictures</title>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>
<style>

body
{
	
}

.VerticalAlgin
{
	position:relative; 
	top: 50%; 
	transform: translateY(-50%);
}

</style>

<script>
	// Picture Class
	function Picture(imageInfo)
	{
		data = imageInfo.split(',');
		this.imgName = data[0];
		this.imgId = data[1];
		this.imgDate = data[2];
		this.imgTime = data[3];
		this.tags = data[4].split('|');
		this.lists = data[5].split('|');
		this.hasEdited = (data[6] == "true")
	}
	
	var imgID = 0;
	var images = [];
	var taggedImages = images;
	var searchTags = [];
	var removedTags = [];
	
	// Loads image
	function LoadImage()
	{
		var image = images[imgID];
		document.getElementById("pictureName").innerHTML = image.imgName;
		document.getElementById("picture").src = "https://firebasestorage.googleapis.com/v0/b/cern-trip-website.appspot.com/o/jpeg%2F" + image.imgName + ".jpg?alt=media";
		document.getElementById("downloadCR2").href = "https://drive.google.com/uc?export=download&id=" + image.imgId;
		document.getElementById("downloadJpg").href = "https://drive.google.com/uc?export=download&id=" + image.imgId;
		document.getElementById("downloadEditedJpg").href = "https://drive.google.com/uc?export=download&id=" + image.imgId;
	}
	
	function prevImage()
	{
		imgID -= 1;
		if (imgID < 0)
		{
			imgID = images.length - 1
		}
		
		LoadImage();
	}
	
	function nextImage()
	{
		imgID += 1;
		if (imgID == images.length)
		{
			imgID = 0
		}
		
		LoadImage();
	}
	
	
	// On window load
	var rawFile = new XMLHttpRequest();
	rawFile.open("GET", "info2.txt", false);
	rawFile.send();
	var info = rawFile.responseText.split('\n');
	
	for (var line in info)
	{
		images.push(new Picture(info[line]));
	}
	
	
	function hideLargeImage()
	{
		var items = document.getElementsByClassName('largeImage')
	
		for (var i = 0; i < items.length; i++)
		{
			items[i].style.display = 'none';
		}
	}
	
	function updateThumbnails()
	{
		var template = "<img style='margin: 15px; width: 250px;' src='$$'></img>";
		
		document.getElementById('thumbnails').innerHTML = "";
		
		for (var i in taggedImages)
		{
			document.getElementById('thumbnails').innerHTML += template.replace("$$", "https://firebasestorage.googleapis.com/v0/b/cern-trip-website.appspot.com/o/jpeg%2F" + taggedImages[i].imgName + ".jpg?alt=media")
		}
	}
	
	function updateTags()
	{
		taggedImages = [];
		
		if (searchTags.length == 0)
		{
			taggedImages = images;
		}
		else
		{
			for (var i in images)
			{
				for (var t in searchTags)
				{
					if (images[i].tags.indexOf(searchTags[t]) !== -1)
					{
						taggedImages.push(images[i]);
						break;
					}
				}
			}
		}
		
		if (removedTags.length != 0)
		{
			for (var i in taggedImages)
			{
				for (var t in removedTags)
				{
					if (taggedImages[i].tags.indexOf(removedTags[t]) !== -1)
					{
						taggedImages.splice(i, 1);
						break;
					}
				}
			}
		}
	}
	
	function onTagsChange(e)
	{
		if (e.name === "Search")
		{
			if (e.checked)
			{
				searchTags.push(e.value);
			}
			else
			{
				searchTags.splice(searchTags.indexOf(e.value), 1)
			}
		}
		else if (e.name === "Remove")
		{
			if (e.checked)
			{
				removedTags.push(e.value);
			}
			else
			{
				removedTags.splice(removedTags.indexOf(e.value), 1)
			}
		}
		
		updateTags();
		updateThumbnails();
	}
	
</script>

</head>


<body>


<span class="largeImage" style="position: fixed; width: 90%; height: 85%; top: 0%; left: 5%; background-color: rgba(0, 0, 0, 0.5); text-align: center;" onclick="hideLargeImage()" >
	<img id="picture" style="height: 100%;" src=""></img>
</span>

<div class="largeImage" id="prevImage" style="position: fixed; width: 5%; height: 100%; left: 0; top: 0; background-color: rgba(0, 0, 0, 0.8); display: block; cursor: pointer;" onclick="prevImage()" >
	<img src="ArrowLeft.png" style="position:absolute; width: 50%; pointer-events: none; left: 25%;" class="VerticalAlgin"></image>
</div>

<div class="largeImage" id="nextImage" style="position: fixed; width: 5%; height: 100%; right: 0; top: 0; background-color: rgba(0, 0, 0, 0.8); display: block; cursor: pointer;" onclick="nextImage()" >
	<img src="ArrowRight.png" style="position:absolute; width: 50%; pointer-events: none; left: 25%;" class="VerticalAlgin"></image>
</div>

<div class="largeImage" id="bottomPanel" style="position: fixed; width: 90%; height: 15%; left: 5%; bottom: 0; background-color: rgba(0, 0, 0, 0.6); padding: 15px; display: block;">
	<p id="pictureName" style="text-align: center; width: 100%; font-size: 24px;"></p>
	<div style="margin: 0 auto; display: block; width: 100%; text-align: center;">
		<a id="downloadCR2" class="btn btn-success disabled" href="">Download RAW Image</a>
		<a id="downloadJpg" class="btn btn-success" href="">Download Image</a>
		<a id="downloadEditedJpg" class="btn btn-success disabled" href="">Download Edited Image</a>
	</div>
</div>

<span id="pictures" style="width: 100%; padding: 15px 15px;">
	
	<div style="width: 100%; height: auto; padding: 0 15px;" >
		<table style="width: 100%; height: 100; border: solid 1px #000;">
			<tr>
				<td style="height: 100%;">
					<h1>Exclusive Search Tags</h1>
					<p>Enabling one of these will result in images only containing these tags.<br/>If multiple are checked, the images shown will contain all tags.</p>
					<form>
						<input type="checkbox" name="Search" value="Rich" onclick="onTagsChange(this);"> Rich<br/>
						<input type="checkbox" name="Search" value="Amanda" onclick="onTagsChange(this);"> Amanda<br/>
						<input type="checkbox" name="Search" value="Martin" onclick="onTagsChange(this);"> Martin<br/>
						<input type="checkbox" name="Search" value="Jane (Teacher)" onclick="onTagsChange(this);"> Jane (Teacher)<br/>
						<input type="checkbox" name="Search" value="Tom" onclick="onTagsChange(this);"> Tom<br/>
						<input type="checkbox" name="Search" value="Dom" onclick="onTagsChange(this);"> Dom<br/>
						<input type="checkbox" name="Search" value="Ollie" onclick="onTagsChange(this);"> Ollie<br/>
						<input type="checkbox" name="Search" value="Matthew" onclick="onTagsChange(this);"> Matthew<br/>
						<input type="checkbox" name="Search" value="Alex" onclick="onTagsChange(this);"> Alex<br/>
						<input type="checkbox" name="Search" value="Winky" onclick="onTagsChange(this);"> Winky<br/>
						<input type="checkbox" name="Search" value="Naomi" onclick="onTagsChange(this);"> Naomi<br/>
						<input type="checkbox" name="Search" value="Namoe" onclick="onTagsChange(this);"> Namoe<br/>
						<input type="checkbox" name="Search" value="Grace" onclick="onTagsChange(this);"> Grace<br/>
						<input type="checkbox" name="Search" value="Jasmine" onclick="onTagsChange(this);"> Jasmine<br/>
						<input type="checkbox" name="Search" value="Yasmin" onclick="onTagsChange(this);"> Yasmin<br/>
						<input type="checkbox" name="Search" value="Leah" onclick="onTagsChange(this);"> Leah<br/>
						<input type="checkbox" name="Search" value="Jane" onclick="onTagsChange(this);"> Jane<br/>
						<input type="checkbox" name="Search" value="Connie" onclick="onTagsChange(this);"> Connie<br/>
						<input type="checkbox" name="Search" value="CERN" onclick="onTagsChange(this);"> CERN<br/>
						<input type="checkbox" name="Search" value="Mountains" onclick="onTagsChange(this);"> Mountains<br/>
						<input type="checkbox" name="Search" value="Scenery" onclick="onTagsChange(this);"> Scenery<br/>
						<input type="checkbox" name="Search" value="Glacier" onclick="onTagsChange(this);"> Glacier<br/>
						<input type="checkbox" name="Search" value="Science Museum" onclick="onTagsChange(this);"> Science Museum<br/>
						<input type="checkbox" name="Search" value="Disneyland" onclick="onTagsChange(this);"> Disneyland<br/>
						<input type="checkbox" name="Search" value="Living Place" onclick="onTagsChange(this);"> Living Place<br/>
						<input type="checkbox" name="Search" value="Bad Photo" onclick="onTagsChange(this);"> Bad Photo<br/>
						<input type="checkbox" name="Search" value="Group Photo" onclick="onTagsChange(this);"> Group Photo<br/>
						<input type="checkbox" name="Search" value="Hike" onclick="onTagsChange(this);"> Hike<br/>
						<input type="checkbox" name="Search" value="Dogs" onclick="onTagsChange(this);"> Dogs<br/>
						<input type="checkbox" name="Search" value="Other" onclick="onTagsChange(this);"> Other
					</form>
				</td>
				<td style="height: 100%;">
					<h1>Remove Tags</h1>
					<p>Enabling one of these will result in images not containing these tags.<br/>If multiple are checked, the images shown will contain none of the selected tags.<br/>This feature overrides exclusive search.</p>
					<form>
						<input type="checkbox" name="Remove" value="Rich" onclick="onTagsChange(this);"> Rich<br/>
						<input type="checkbox" name="Remove" value="Amanda" onclick="onTagsChange(this);"> Amanda<br/>
						<input type="checkbox" name="Remove" value="Martin" onclick="onTagsChange(this);"> Martin<br/>
						<input type="checkbox" name="Remove" value="Jane (Teacher)" onclick="onTagsChange(this);"> Jane (Teacher)<br/>
						<input type="checkbox" name="Remove" value="Tom" onclick="onTagsChange(this);"> Tom<br/>
						<input type="checkbox" name="Remove" value="Dom" onclick="onTagsChange(this);"> Dom<br/>
						<input type="checkbox" name="Remove" value="Ollie" onclick="onTagsChange(this);"> Ollie<br/>
						<input type="checkbox" name="Remove" value="Matthew" onclick="onTagsChange(this);"> Matthew<br/>
						<input type="checkbox" name="Remove" value="Alex" onclick="onTagsChange(this);"> Alex<br/>
						<input type="checkbox" name="Remove" value="Winky" onclick="onTagsChange(this);"> Winky<br/>
						<input type="checkbox" name="Remove" value="Naomi" onclick="onTagsChange(this);"> Naomi<br/>
						<input type="checkbox" name="Remove" value="Namoe" onclick="onTagsChange(this);"> Namoe<br/>
						<input type="checkbox" name="Remove" value="Grace" onclick="onTagsChange(this);"> Grace<br/>
						<input type="checkbox" name="Remove" value="Jasmine" onclick="onTagsChange(this);"> Jasmine<br/>
						<input type="checkbox" name="Remove" value="Yasmin" onclick="onTagsChange(this);"> Yasmin<br/>
						<input type="checkbox" name="Remove" value="Leah" onclick="onTagsChange(this);"> Leah<br/>
						<input type="checkbox" name="Remove" value="Jane" onclick="onTagsChange(this);"> Jane<br/>
						<input type="checkbox" name="Remove" value="Connie" onclick="onTagsChange(this);"> Connie<br/>
						<input type="checkbox" name="Remove" value="CERN" onclick="onTagsChange(this);"> CERN<br/>
						<input type="checkbox" name="Remove" value="Mountains" onclick="onTagsChange(this);"> Mountains<br/>
						<input type="checkbox" name="Remove" value="Scenery" onclick="onTagsChange(this);"> Scenery<br/>
						<input type="checkbox" name="Remove" value="Glacier" onclick="onTagsChange(this);"> Glacier<br/>
						<input type="checkbox" name="Remove" value="Science Museum" onclick="onTagsChange(this);"> Science Museum<br/>
						<input type="checkbox" name="Remove" value="Disneyland" onclick="onTagsChange(this);"> Disneyland<br/>
						<input type="checkbox" name="Remove" value="Living Place" onclick="onTagsChange(this);"> Living Place<br/>
						<input type="checkbox" name="Remove" value="Bad Photo" onclick="onTagsChange(this);"> Bad Photo<br/>
						<input type="checkbox" name="Remove" value="Group Photo" onclick="onTagsChange(this);"> Group Photo<br/>
						<input type="checkbox" name="Remove" value="Hike" onclick="onTagsChange(this);"> Hike<br/>
						<input type="checkbox" name="Remove" value="Dogs" onclick="onTagsChange(this);"> Dogs<br/>
						<input type="checkbox" name="Remove" value="Other" onclick="onTagsChange(this);"> Other
					</form>
				</td>
			</tr>
		</table>
	</div>
	
	
	<span id="thumbnails" style="padding: 15px;">
		
	</span>
</span>



<script>
hideLargeImage();
LoadImage();
</script>
</body>
</html>